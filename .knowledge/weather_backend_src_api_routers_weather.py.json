{"is_source_file": true, "format": "Python", "description": "This file defines API routes for weather-related endpoints using FastAPI. It includes endpoints to retrieve current weather and weather forecasts based on location queries or coordinates. It calls external weather and geocoding clients and defines responses and models for the API.", "external_files": ["src.api.clients.weather_client", "src.api.clients.geocoding_client", "src.api.models"], "external_methods": ["get_current_weather", "get_forecast", "_weathercode_to_text_icon", "geocode_search"], "published": ["current_weather", "forecast"], "classes": [{"name": "Coordinates", "description": "Data model representing geographical coordinates with latitude and longitude."}, {"name": "Location", "description": "Data model representing a geographic location with name, country, state, and coordinates."}, {"name": "CurrentWeather", "description": "Model representing current weather data, including temperature, wind, condition, and time."}, {"name": "CurrentWeatherResponse", "description": "API response model encapsulating a Location and associated current weather data."}, {"name": "DailyForecastItem", "description": "Model representing daily forecast data: date, min/max temp, weather code, and condition."}, {"name": "HourlyForecastItem", "description": "Model representing hourly forecast data: time, temperature, weather code, and condition."}, {"name": "ForecastResponse", "description": "API response model encapsulating a Location with daily and hourly forecast lists."}, {"name": "ErrorResponse", "description": "Model representing error response details."}], "methods": [{"name": "_resolve_location_from_query(q: Optional[str], lat: Optional[float], lon: Optional[float])", "description": "Resolves location input from a query string or coordinates, raising HTTPException if input is invalid.", "scope": "", "scopeKind": ""}, {"name": "tuple[float,float,Location] _resolve_coordinates_and_location( q: Optional[str], lat: Optional[float], lon: Optional[float] )", "description": "Resolves full location info (coordinates and name) from query parameters or geocodes a location name.", "scope": "", "scopeKind": ""}, {"name": "CurrentWeatherResponse current_weather( q: Optional[str] = Query(None, description=\"Free-text location query (e.g., 'Berlin')\"), lat: Optional[float] = Query(None, description=\"Latitude in decimal degrees\"), lon: Optional[float] = Query(None, description=\"Longitude in decimal degrees\"), )", "description": "API endpoint to get current weather data for a specified location.", "scope": "", "scopeKind": ""}, {"name": "ForecastResponse forecast( q: Optional[str] = Query(None, description=\"Free-text location query (e.g., 'Berlin')\"), lat: Optional[float] = Query(None, description=\"Latitude in decimal degrees\"), lon: Optional[float] = Query(None, description=\"Longitude in decimal degrees\"), days: int = Query(3, ge=1, le=10, description=\"Number of forecast days (1-10)\"), )", "description": "API endpoint to get weather forecasts (daily and hourly) for a specified location.", "scope": "", "scopeKind": ""}], "calls": ["geocode_search", "get_current_weather", "get_forecast", "_weathercode_to_text_icon"], "search-terms": ["FastAPI", "weather endpoints", "location query", "geocoding", "weather forecast", "APIRouter"], "state": 2, "file_id": 11, "knowledge_revision": 30, "git_revision": "685d4f1c52f3fcafb2bf799f56f581c04b7fb71c", "ctags": [{"_type": "tag", "name": "_resolve_coordinates_and_location", "path": "/home/kavia/workspace/code-generation/weather-companion-215470-215479/weather_backend/src/api/routers/weather.py", "pattern": "/^async def _resolve_coordinates_and_location($/", "language": "Python", "typeref": "typename:tuple[float,float,Location]", "kind": "function", "signature": "( q: Optional[str], lat: Optional[float], lon: Optional[float] )"}, {"_type": "tag", "name": "_resolve_location_from_query", "path": "/home/kavia/workspace/code-generation/weather-companion-215470-215479/weather_backend/src/api/routers/weather.py", "pattern": "/^def _resolve_location_from_query(q: Optional[str], lat: Optional[float], lon: Optional[float]):$/", "language": "Python", "kind": "function", "signature": "(q: Optional[str], lat: Optional[float], lon: Optional[float])"}, {"_type": "tag", "name": "current_weather", "path": "/home/kavia/workspace/code-generation/weather-companion-215470-215479/weather_backend/src/api/routers/weather.py", "pattern": "/^async def current_weather($/", "language": "Python", "typeref": "typename:CurrentWeatherResponse", "kind": "function", "signature": "( q: Optional[str] = Query(None, description=\"Free-text location query (e.g., 'Berlin')\"), lat: Optional[float] = Query(None, description=\"Latitude in decimal degrees\"), lon: Optional[float] = Query(None, description=\"Longitude in decimal degrees\"), )"}, {"_type": "tag", "name": "forecast", "path": "/home/kavia/workspace/code-generation/weather-companion-215470-215479/weather_backend/src/api/routers/weather.py", "pattern": "/^async def forecast($/", "language": "Python", "typeref": "typename:ForecastResponse", "kind": "function", "signature": "( q: Optional[str] = Query(None, description=\"Free-text location query (e.g., 'Berlin')\"), lat: Optional[float] = Query(None, description=\"Latitude in decimal degrees\"), lon: Optional[float] = Query(None, description=\"Longitude in decimal degrees\"), days: int = Query(3, ge=1, le=10, description=\"Number of forecast days (1-10)\"), )"}, {"_type": "tag", "name": "router", "path": "/home/kavia/workspace/code-generation/weather-companion-215470-215479/weather_backend/src/api/routers/weather.py", "pattern": "/^router = APIRouter($/", "language": "Python", "kind": "variable"}], "hash": "b46fc70b388c3c72691de070de19f174", "format-version": 4, "code-base-name": "weather_backend", "filename": "weather_backend/src/api/routers/weather.py", "fields": [{"name": "router = APIRouter(", "scope": "", "scopeKind": "", "description": "unavailable"}], "revision_history": [{"30": "685d4f1c52f3fcafb2bf799f56f581c04b7fb71c"}]}